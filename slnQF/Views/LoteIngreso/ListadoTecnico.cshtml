
@model IEnumerable<slnQF.SP_CONSULTA_TECNICO_CERTIFICADOResult>

<div class="col-md-12">
    @{
        WebGrid grid = new WebGrid(Model, canPage: false, selectionFieldName: "selectedRow", ajaxUpdateContainerId: "gridLoteTec");
    }
    <div class="table-responsive">
        <div id="gridLoteTec">
            @grid.GetHtml(
                                   htmlAttributes: new { width = "100%" },
                                     mode: WebGridPagerModes.All,
                                     columns: new[] {

                                    grid.Column("", header: "", canSort:false,
                                    format: @<text>
                                        @Html.Raw("<a href='#' onclick='cambioEstado(" + item.ID_LOTE_INGRESO +"," + item.ID_LOTE_INGRESO_TECNICO + ")' text='glyphicon glyphicon-edit ' title='Editar'>"+ item.ESTADO +" </a>")
                                     </text>),
                                     grid.Column("PERSONA", "Tecnico", null, "text-center", false),
                                     grid.Column("FECHA_CREACION", "Fecha", null, "text-center", false)
                                 })
        </div>
    </div>
</div>

<script type="text/javascript">

    $(function () {
        $('#gridLoteTec table').DataTable({
            "pageLength": 3,
            //"searching": true,
            "paging": true,

            "searching": true,

            fixedColumns: true
        });
    });

    function cambioEstado(pid_loteing, pid_loteing_TEC) {



        $.post('/LoteIngreso/fnCambioEstadoTecnicoCert?Id=' + pid_loteing_TEC,
            function (data) {
                $("#DivToAppendPartialViewList").empty();
                var ph2 = $("#DivToAppendPartialViewList");
                ph2.load("/LoteIngreso/ListadoTecnico?id=" + pid_loteing);
            }
            , 'json');
    }
</script>
